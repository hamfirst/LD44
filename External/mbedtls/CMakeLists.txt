cmake_minimum_required(VERSION 3.1.0)

include_directories(${CMAKE_CURRENT_SOURCE_DIR} ${PROJECT_SOURCE_DIR}
                    ${PROJECT_SOURCE_DIR}/External
                    ${PROJECT_SOURCE_DIR}/StormTech
                    ${PROJECT_SOURCE_DIR}/Tools
                    ${PROJECT_SOURCE_DIR}/Shared
                    ${PROJECT_SOURCE_DIR}/Project
                    ${PROJECT_SOURCE_DIR}/Lobby)

set(CMAKE_CXX_STANDARD 17)

set(GENERIC_SRC_mbedtls 
            aes.c
            aesni.c
            arc4.c
            aria.c
            asn1parse.c
            asn1write.c
            base64.c
            bignum.c
            blowfish.c
            camellia.c
            ccm.c
            certs.c
            chacha20.c
            chachapoly.c
            cipher.c
            cipher_wrap.c
            cmac.c
            ctr_drbg.c
            debug.c
            des.c
            dhm.c
            ecdh.c
            ecdsa.c
            ecjpake.c
            ecp.c
            ecp_curves.c
            entropy.c
            entropy_poll.c
            error.c
            gcm.c
            havege.c
            hkdf.c
            hmac_drbg.c
            md.c
            md2.c
            md4.c
            md5.c
            memory_buffer_alloc.c
            net_sockets.c
            nist_kw.c
            oid.c
            padlock.c
            pem.c
            pk.c
            pk_wrap.c
            pkcs11.c
            pkcs12.c
            pkcs5.c
            pkparse.c
            pkwrite.c
            platform.c
            platform_util.c
            poly1305.c
            ripemd160.c
            rsa.c
            rsa_internal.c
            sha1.c
            sha256.c
            sha512.c
            ssl_cache.c
            ssl_ciphersuites.c
            ssl_cli.c
            ssl_cookie.c
            ssl_msg.c
            ssl_srv.c
            ssl_ticket.c
            ssl_tls.c
            ssl_tls13_keys.c
            threading.c
            timing.c
            version.c
            version_features.c
            x509.c
            x509_create.c
            x509_crl.c
            x509_crt.c
            x509_csr.c
            x509write_crt.c
            x509write_csr.c
            xtea.c
            )

set(GENERIC_HEADER_mbedtls 
            aes.h
            aesni.h
            arc4.h
            aria.h
            asn1.h
            asn1write.h
            base64.h
            bignum.h
            blowfish.h
            bn_mul.h
            camellia.h
            ccm.h
            certs.h
            chacha20.h
            chachapoly.h
            check_config.h
            check_crypto_config.h
            cipher.h
            cipher_internal.h
            cmac.h
            common.h
            compat-1.3.h
            config.h
            config_psa.h
            crypto.h
            crypto_accel_driver.h
            crypto_compat.h
            crypto_config.h
            crypto_driver_common.h
            crypto_entropy_driver.h
            crypto_extra.h
            crypto_platform.h
            crypto_se_driver.h
            crypto_sizes.h
            crypto_struct.h
            crypto_types.h
            crypto_values.h
            ctr_drbg.h
            debug.h
            des.h
            dhm.h
            ecdh.h
            ecdsa.h
            ecjpake.h
            ecp.h
            ecp_internal.h
            entropy.h
            entropy_poll.h
            error.h
            gcm.h
            havege.h
            hkdf.h
            hmac_drbg.h
            md.h
            md2.h
            md4.h
            md5.h
            md_internal.h
            memory_buffer_alloc.h
            net.h
            net_sockets.h
            nist_kw.h
            oid.h
            padlock.h
            pem.h
            pk.h
            pk_internal.h
            pkcs11.h
            pkcs12.h
            pkcs5.h
            platform.h
            platform_time.h
            platform_util.h
            poly1305.h
            ripemd160.h
            rsa.h
            rsa_internal.h
            sha1.h
            sha256.h
            sha512.h
            ssl.h
            ssl_cache.h
            ssl_ciphersuites.h
            ssl_cookie.h
            ssl_internal.h
            ssl_invasive.h
            ssl_ticket.h
            ssl_tls13_keys.h
            threading.h
            threading_alt.h
            timing.h
            version.h
            x509.h
            x509_crl.h
            x509_crt.h
            x509_csr.h
            xtea.h
            )

add_library(mbedtls STATIC ${GENERIC_SRC_mbedtls} ${GENERIC_HEADER_mbedtls})
source_group(TREE "${CMAKE_CURRENT_SOURCE_DIR}" FILES ${GENERIC_SRC_mbedtls} ${GENERIC_HEADER_mbedtls})

